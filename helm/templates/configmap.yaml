# Store/helm/templates/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-config
  labels:
    app: darwin-store
    app.kubernetes.io/name: darwin-store
    app.kubernetes.io/instance: {{ .Release.Name }}
data:
  # App metadata (used by health endpoint)
  SERVICE_NAME: {{ .Values.app.name | quote }}
  SERVICE_VERSION: {{ .Values.app.version | quote }}
  # Chaos mode
  CHAOS_MODE: {{ .Values.config.chaos_mode | quote }}
  # Chaos controller URL (used by backend to fetch chaos state via HTTP)
  CHAOS_CONTROLLER_URL: "http://{{ .Release.Name }}-chaos:{{ .Values.service.chaos.port }}"
